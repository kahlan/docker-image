# AUTOMATICALLY GENERATED
# DO NOT EDIT THIS FILE DIRECTLY, USE /Dockerfile-template.j2

FROM composer/composer:{{ composer_tag }}


# Install Kahlan
RUN mkdir -p /usr/src/kahlan \
 && cd /usr/src/kahlan \
 && composer selfupdate \
 && composer require "kahlan/kahlan:{{ kahlan_ver }}" \
 && ln -s /usr/src/kahlan/vendor/bin/kahlan /usr/local/bin/kahlan \
 && ln -s /usr/local/bin/kahlan /kahlan

{% if composer_tag|truncate(4, True, '') != 'php5' %}
# Create handy wrapper for running Kahlan under phpdbg
RUN echo '#!/bin/sh' >> /usr/local/bin/kahlan-phpdbg \
 && echo 'exec /usr/local/bin/phpdbg -qrr /usr/local/bin/kahlan "$@"' \
                     >> /usr/local/bin/kahlan-phpdbg \
 && chmod +x /usr/local/bin/kahlan-phpdbg \
 && ln -s /usr/local/bin/kahlan-phpdbg /kahlan-phpdbg
{% endif %}


ENTRYPOINT ["/kahlan"]

CMD ["--help"]
